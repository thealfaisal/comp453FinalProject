{% extends "layout.html" %}
{% block content %}
    <div class="content-section">
      <h3>Review and Reserve</h3>
      <p>Reserve now and pay later</p>
      <div class="content-section"><small>
        <h6>Your amount due</h6>
        <p>Amount: {{ diff }} days * ${{ car.rate|round }} = ${{ amount|round }}</p>
        <p>Tax: ${{ tax|round }}</p>
        <p>Total with tax: ${{ total|round }}</p></small>
      </div>
    </div>
    <div class="content-section">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Who's Driving?</legend>
                <div class="content-section">
                  <div class="form-group">
                      {{ form.fullname.label(class="form-control-label") }}

                      {% if form.fullname.errors %}
                          {{ form.fullname(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.fullname.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.fullname(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                  <div class="form-group">
                      {{ form.phonenumber.label(class="form-control-label") }}

                      {% if form.phonenumber.errors %}
                          {{ form.phonenumber(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.phonenumber.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.phonenumber(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                </div>
                <div class="content-section">
                  <h5>Confirmation Email</h5>
                  <hr>
                  <p><small>Enter an email to get confirmation</small></p>
                  <div class="form-group">
                      {{ form.email.label(class="form-control-label") }}
                      {% if form.email.errors %}
                          {{ form.email(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.email.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.email(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                </div>
                <div class="content-section">
                  <h5>Manage Your Reservation</h5>
                  <hr>
                  <p><small>Enter a Username and Password to create an account</small></p>
                  <div class="form-group">
                      {{ form.username.label(class="form-control-label") }}

                      {% if form.username.errors %}
                          {{ form.username(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.username.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.username(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                  <div class="form-group">
                      {{ form.password.label(class="form-control-label") }}
                      {% if form.password.errors %}
                          {{ form.password(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.password.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.password(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                  <div class="form-group">
                      {{ form.confirm_password.label(class="form-control-label") }}
                      {% if form.confirm_password.errors %}
                          {{ form.confirm_password(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                              {% for error in form.confirm_password.errors %}
                                  <span>{{ error }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.confirm_password(class="form-control form-control-lg") }}
                      {% endif %}
                  </div>
                </div>
            </fieldset>
          </div>
          <div class="content-section">
            <h5>Your car Information</h5>
            <hr>
            <p>{{ car.style }}  ...  {{ dateTo }} - {{ dateFrom }}</p>
            <ul style="overflow: scroll; height: 10em;"><small>
              <li>The following rules and restrictions are provided by the car rental company.</li>
              <li>The driver must present a valid driver's license (Opens in a new window.) and credit card in their name upon pick-up. The credit card is required as a deposit when renting any vehicle. The deposit amount is held by the car rental company. Please ensure sufficient funds are available on the card.</li>
              <li>International rentals may have different driver license requirements. An international driving license is required if the drivers' license is non-roman alphabet.</li>
              <li>Additional charges or restrictions (Opens in a new window.) may apply for drivers under 25 or over 70.</li>
              <li>Charges for refueling (Opens in a new window.), additional drivers, etc. are not included in the total price.</li>
              <li>Special equipment (Opens in a new window.), such as child seats and GPS, can be purchased upon pick-up (if available).</li>
              <li>Geographical restrictions may apply, even for rental contracts that feature unlimited mileage. Some car rental companies do not allow you to take their vehicles across certain domestic or international borders, or may apply an additional charge to do so.</li>
              <li>Your rental may have mandatory, local insurance requirements (Opens in a new window.) that result in additional charges at the time of rental.</li>
              <li>The total price includes all mandatory taxes and fees.</li></small>
            </ul>
            <div class="form-group">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
          </div>
        </form>

    <div class="border-top pt-3">
        <small class="text-muted">
            Already Have An Account? <a class="ml-2" href="{{ url_for('login') }}">Login In</a>
        </small>
    </div>
{% endblock content %}
